<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<title>Pesquisa de Jurisprudência – Gabinete Des. F. R. Montefusco</title>
<style>
  /* Estilo herdado da página principal */
  body{font-family:Arial,Helvetica,sans-serif;background:#174b73;color:#fff;margin:0;}
  #sidebar{position:fixed;top:0;left:0;width:240px;height:100%;background:#0b2f4d;padding-top:60px;box-shadow:2px 0 6px rgba(0,0,0,.3);}  
  #sidebar a{display:block;padding:12px 20px;color:#fff;text-decoration:none;font-size:1rem;}
  #sidebar a:hover{background:#105b8e;}
  #content{margin-left:260px;padding:40px 20px;min-height:100vh;}
  #content h1{font-size:2rem;margin-bottom:20px;text-align:center;}
  /* Barra de pesquisa */
  .search-bar{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin-bottom:25px;}
  .search-bar input[type="text"],.search-bar input[type="date"]{padding:8px;border:none;border-radius:4px;width:200px;max-width:90%;}
  .search-bar button{padding:8px 18px;border:none;border-radius:4px;background:#0b2f4d;color:#fff;font-weight:bold;cursor:pointer;}
  .search-bar button:hover{background:#105b8e;}
  /* Blocos de jurisprudência */
  .block{background:#0b2f4d;border-radius:6px;padding:16px;margin:10px auto;max-width:900px;display:none;} /* hidden by default */
  .block h3{margin:0 0 6px 0;font-size:1.05rem;color:#fff;}
  .block p{margin:4px 0 0 0;font-size:.9rem;line-height:1.3;}
  /* Paginação */
  .pagination{display:flex;justify-content:center;gap:6px;margin:20px 0;}
  .pagination button{background:#0b2f4d;border:none;border-radius:4px;color:#fff;padding:6px 12px;cursor:pointer;}
  .pagination button.active{background:#105b8e;font-weight:bold;}
</style>
</head>
<body>

<!-- Sidebar -->
<div id="sidebar">
  <a href="index.html" rel="noopener noreferrer">🔙 Voltar aos Links Úteis</a>
</div>

<!-- Main content -->
<div id="content">
  <h1>🔎 Pesquisa Avançada de Jurisprudência</h1>

  <!-- Barra de pesquisa -->
  <div class="search-bar">
    <input type="text" id="terms" placeholder="Digite termos (separados por espaço)">
    <input type="date" id="startDate">
    <input type="date" id="endDate">
    <button onclick="performSearch()">Consultar</button>
  </div>

  <!-- Área dos blocos (até 50 por página) -->
  <div id="allBlocks">
    <!-- Exemplo de bloco -->
    <!--
      Para cada decisão/ementa insira um bloco no formato abaixo.
      A data deve estar no atributo data-date no formato YYYY-MM-DD.
    -->
    <div class="block" data-date="2025-02-14">
      <h3>Apelação Cível nº 0000000-00.2024.8.09.0000 – 14/02/2025</h3>
      <p>Trecho/ementa da decisão ou resumo que será pesquisável.</p>
    </div>

    <!-- Duplique os blocos conforme necessário -->
  </div>

  <!-- Paginação -->
  <div id="pagination" class="pagination"></div>
</div>

<script>
const PAGE_SIZE = 50;
let currentResults = [];
let currentPage = 1;

function performSearch(){
  const terms = document.getElementById('terms').value.trim().toLowerCase().split(/\s+/).filter(Boolean);
  const start = document.getElementById('startDate').value;
  const end = document.getElementById('endDate').value;

  const blocks = Array.from(document.querySelectorAll('#allBlocks .block'));
  currentResults = blocks.filter(block=>{
    const text = block.textContent.toLowerCase();
    const date = block.getAttribute('data-date');

    // Termos AND
    const termMatch = terms.every(t=>text.includes(t));

    // Datas
    const afterStart = !start || date >= start;
    const beforeEnd = !end || date <= end;

    return termMatch && afterStart && beforeEnd;
  });
  currentPage = 1;
  renderPage();
}

function renderPage(){
  const blocks = Array.from(document.querySelectorAll('#allBlocks .block'));
  blocks.forEach(b=>b.style.display='none');

  const totalPages = Math.max(1, Math.ceil(currentResults.length/PAGE_SIZE));
  const startIndex = (currentPage-1)*PAGE_SIZE;
  const pageItems = currentResults.slice(startIndex, startIndex+PAGE_SIZE);
  pageItems.forEach(b=>b.style.display='block');

  // Paginação UI
  const pagDiv = document.getElementById('pagination');
  pagDiv.innerHTML='';
  if(totalPages>1){
    for(let i=1;i<=totalPages;i++){
      const btn=document.createElement('button');
      btn.textContent=i;
      if(i===currentPage)btn.classList.add('active');
      btn.addEventListener('click',()=>{currentPage=i;renderPage();});
      pagDiv.appendChild(btn);
    }
  }
}

// Inicializa exibindo todos
window.onload=()=>{
  currentResults = Array.from(document.querySelectorAll('#allBlocks .block'));
  renderPage();
};
</script>
</body>
</html>
